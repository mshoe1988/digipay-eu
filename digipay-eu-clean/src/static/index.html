<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digipay EU Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="translations.js"></script>
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
        <div class="logo">
            <i class="fas fa-credit-card"></i>
            <span>Digipay EU</span>
        </div>
                
                <!-- Language Selector -->
                <div class="language-selector">
                    <select id="languageSelect" onchange="changeLanguage(this.value)">
                        <option value="en">English</option>
                        <option value="es">Español</option>
                        <option value="fr">Français</option>
                        <option value="de">Deutsch</option>
                        <option value="it">Italiano</option>
                        <option value="pt">Português</option>
                    </select>
                </div>
            </div>
            
            <ul class="sidebar-menu">
                <li class="menu-item active" data-page="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span data-translate="dashboard">Dashboard</span>
                </li>
                <li class="menu-item" data-page="transactions">
                    <i class="fas fa-exchange-alt"></i>
                    <span data-translate="transactions">Transactions</span>
                </li>
                <li class="menu-item" data-page="merchants">
                    <i class="fas fa-store"></i>
                    <span data-translate="merchants">Merchants</span>
                </li>
                <li class="menu-item" data-page="analytics">
                    <i class="fas fa-chart-bar"></i>
                    <span data-translate="analytics">Analytics</span>
                </li>
                <li class="menu-item" data-page="billing">
                    <i class="fas fa-euro-sign"></i>
                    <span data-translate="billing">Billing</span>
                </li>
                <li class="menu-item" data-page="invoices">
                    <i class="fas fa-file-invoice"></i>
                    <span data-translate="invoices">Invoices</span>
                </li>
                <li class="menu-item" data-page="revenue">
                    <i class="fas fa-chart-line"></i>
                    <span data-translate="revenue">Revenue</span>
                </li>
                <li class="menu-item" data-page="fee-calculator">
                    <i class="fas fa-calculator"></i>
                    <span data-translate="fee_calculator">Fee Calculator</span>
                </li>
                <li class="menu-item" data-page="security">
                    <i class="fas fa-shield-alt"></i>
                    <span data-translate="security">Security</span>
                </li>
                <li class="menu-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span data-translate="settings">Settings</span>
                </li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                  <div class="main-header">
                <h1 data-translate="dashboard">Dashboard</h1>
                <p data-translate="dashboard_subtitle">Monitor your payment gateway performance</p>
                </div>
                <div class="header-right">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" data-translate-placeholder="search_transactions" placeholder="Search transactions...">
                    </div>
                    <div class="user-menu">
                        <img src="https://via.placeholder.com/40x40" alt="User" class="user-avatar">
                        <span data-translate="admin_user">Admin User</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </header>

            <!-- Page Content -->
            <div class="page-content">
                <!-- Dashboard Page -->
                <div id="dashboard-page" class="page active">
                    <!-- Stats Cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-revenue">€0</h3>
                                <p data-translate="total_revenue">Total Revenue</p>
                                <span class="stat-change positive">+12.5%</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-credit-card"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-transactions">0</h3>
                                <p data-translate="total_transactions">Total Transactions</p>
                                <span class="stat-change positive">+8.2%</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="success-rate">0%</h3>
                                <p data-translate="success_rate">Success Rate</p>
                                <span class="stat-change positive">+2.1%</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-store"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="active-merchants">0</h3>
                                <p data-translate="active_merchants">Active Merchants</p>
                                <span class="stat-change positive">+5</span>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="charts-section">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 data-translate="transaction_volume">Transaction Volume</h3>
                                <div class="chart-controls">
                                    <select id="chart-period">
                                        <option value="7d" data-translate="last_7_days">Last 7 days</option>
                                        <option value="30d" data-translate="last_30_days">Last 30 days</option>
                                        <option value="90d" data-translate="last_90_days">Last 90 days</option>
                                    </select>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="transactionChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 data-translate="payment_methods">Payment Methods</h3>
                            </div>
                            <div class="chart-container">
                                <canvas id="paymentMethodChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Transactions -->
                    <div class="recent-transactions">
                        <div class="section-header">
                            <h3 data-translate="recent_transactions">Recent Transactions</h3>
                            <button class="btn btn-primary" onclick="showPage('transactions')" data-translate="view_all">View All</button>
                        </div>
                        <div class="table-container">
                            <table class="transactions-table">
                                <thead>
                                    <tr>
                                        <th data-translate="transaction_id">Transaction ID</th>
                                        <th data-translate="merchant">Merchant</th>
                                        <th data-translate="amount">Amount</th>
                                        <th data-translate="status">Status</th>
                                        <th data-translate="date">Date</th>
                                        <th data-translate="actions">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="recent-transactions-body">
                                    <!-- Transactions will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Transactions Page -->
                <div id="transactions-page" class="page">
                    <div class="page-header">
                        <div class="filters">
                            <select id="status-filter">
                                <option value="" data-translate="all_statuses">All Statuses</option>
                                <option value="completed" data-translate="completed">Completed</option>
                                <option value="pending" data-translate="pending">Pending</option>
                                <option value="failed" data-translate="failed">Failed</option>
                            </select>
                            <input type="date" id="date-filter">
                            <button class="btn btn-secondary" onclick="applyFilters()" data-translate="apply_filters">Apply Filters</button>
                        </div>
                        <button class="btn btn-primary" onclick="showCreateTransactionModal()">
                            <i class="fas fa-plus"></i> <span data-translate="new_transaction">New Transaction</span>
                        </button>
                    </div>
                    
                    <div class="table-container">
                        <table class="transactions-table">
                            <thead>
                                <tr>
                                    <th data-translate="transaction_id">Transaction ID</th>
                                    <th data-translate="merchant">Merchant</th>
                                    <th data-translate="customer">Customer</th>
                                    <th data-translate="amount">Amount</th>
                                    <th data-translate="payment_method">Payment Method</th>
                                    <th data-translate="status">Status</th>
                                    <th data-translate="date">Date</th>
                                    <th data-translate="actions">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="transactions-body">
                                <!-- Transactions will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Merchants Page -->
                <div id="merchants-page" class="page">
                    <div class="page-header">
                        <div class="filters">
                            <select id="merchant-status-filter">
                                <option value="" data-translate="all_merchants">All Merchants</option>
                                <option value="active" data-translate="active">Active</option>
                                <option value="inactive" data-translate="inactive">Inactive</option>
                                <option value="verified" data-translate="verified">Verified</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" onclick="showCreateMerchantModal()">
                            <i class="fas fa-plus"></i> <span data-translate="add_merchant">Add Merchant</span>
                        </button>
                    </div>
                    
                    <div class="merchants-grid" id="merchants-grid">
                        <!-- Merchants will be loaded here -->
                    </div>
                </div>

                <!-- Analytics Page -->
                <div id="analytics-page" class="page">
                    <div class="analytics-dashboard">
                        <div class="analytics-header">
                            <h2 data-translate="advanced_analytics">Advanced Analytics</h2>
                            <div class="date-range-picker">
                                <input type="date" id="analytics-start-date">
                                <span data-translate="to">to</span>
                                <input type="date" id="analytics-end-date">
                                <button class="btn btn-secondary" onclick="updateAnalytics()" data-translate="update">Update</button>
                            </div>
                        </div>
                        
                        <div class="analytics-grid">
                            <div class="analytics-card">
                                <h3 data-translate="revenue_trends">Revenue Trends</h3>
                                <canvas id="revenueChart"></canvas>
                            </div>
                            
                            <div class="analytics-card">
                                <h3 data-translate="geographic_distribution">Geographic Distribution</h3>
                                <canvas id="geoChart"></canvas>
                            </div>
                            
                            <div class="analytics-card">
                                <h3 data-translate="fraud_detection">Fraud Detection</h3>
                                <div class="fraud-stats">
                                    <div class="fraud-stat">
                                        <span class="fraud-number">0.2%</span>
                                        <span class="fraud-label" data-translate="fraud_rate">Fraud Rate</span>
                                    </div>
                                    <div class="fraud-stat">
                                        <span class="fraud-number">€1,234</span>
                                        <span class="fraud-label" data-translate="prevented_losses">Prevented Losses</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security Page -->
                <div id="security-page" class="page">
                    <div class="security-dashboard">
                        <h2 data-translate="security_compliance">Security & Compliance</h2>
                        
                        <div class="security-grid">
                            <div class="security-card">
                                <div class="security-header">
                                    <h3 data-translate="pci_dss_compliance">PCI DSS Compliance</h3>
                                    <span class="status-badge success" data-translate="compliant">Compliant</span>
                                </div>
                                <div class="security-content">
                                    <p><span data-translate="last_audit">Last audit</span>: January 15, 2025</p>
                                    <p><span data-translate="next_audit">Next audit</span>: July 15, 2025</p>
                                </div>
                            </div>
                            
                            <div class="security-card">
                                <div class="security-header">
                                    <h3>GDPR <span data-translate="compliance">Compliance</span></h3>
                                    <span class="status-badge success" data-translate="compliant">Compliant</span>
                                </div>
                                <div class="security-content">
                                    <p><span data-translate="data_retention">Data retention</span>: 7 <span data-translate="years">years</span></p>
                                    <p><span data-translate="right_to_be_forgotten">Right to be forgotten</span>: <span data-translate="enabled">Enabled</span></p>
                                </div>
                            </div>
                            
                            <div class="security-card">
                                <div class="security-header">
                                    <h3>PSD2 <span data-translate="compliance">Compliance</span></h3>
                                    <span class="status-badge success" data-translate="compliant">Compliant</span>
                                </div>
                                <div class="security-content">
                                    <p><span data-translate="strong_customer_auth">Strong Customer Authentication</span>: <span data-translate="active">Active</span></p>
                                    <p><span data-translate="open_banking_apis">Open Banking APIs</span>: <span data-translate="available">Available</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Page -->
                <div id="settings-page" class="page">
                    <div class="settings-dashboard">
                        <h2 data-translate="system_settings">System Settings</h2>
                        
                        <div class="settings-sections">
                            <div class="settings-section">
                                <h3 data-translate="api_configuration">API Configuration</h3>
                                <div class="setting-item">
                                    <label data-translate="rate_limiting">Rate Limiting</label>
                                    <input type="number" value="1000" data-translate-placeholder="requests_per_minute" placeholder="Requests per minute">
                                </div>
                                <div class="setting-item">
                                    <label data-translate="timeout">Timeout</label>
                                    <input type="number" value="30" data-translate-placeholder="seconds" placeholder="Seconds">
                                </div>
                            </div>
                            
                            <div class="settings-section">
                                <h3 data-translate="security_settings">Security Settings</h3>
                                <div class="setting-item">
                                    <label>
                                        <input type="checkbox" checked> <span data-translate="enable_2fa">Enable 2FA</span>
                                    </label>
                                </div>
                                <div class="setting-item">
                                    <label>
                                        <input type="checkbox" checked> <span data-translate="require_https">Require HTTPS</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Billing Pages -->
            <!-- Billing Page -->
            <div id="billing-page" class="page">
                <div class="billing-dashboard">
                    <div class="billing-header">
                        <h2 data-translate="billing_management">Billing Management</h2>
                        <div class="billing-actions">
                            <button class="btn btn-secondary" onclick="generateAllInvoices()" data-translate="generate_invoices">Generate Invoices</button>
                            <button class="btn btn-primary" onclick="showBillingConfigModal()" data-translate="billing_settings">Billing Settings</button>
                        </div>
                    </div>
                    
                    <!-- Revenue Summary Cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-euro-sign"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-platform-revenue">€0</h3>
                                <p data-translate="total_platform_revenue">Total Platform Revenue</p>
                                <span class="stat-change positive">+15.3%</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-receipt"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="monthly-revenue">€0</h3>
                                <p data-translate="monthly_revenue">Monthly Revenue</p>
                                <span class="stat-change positive">+8.7%</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="average-fee-per-transaction">€0.00</h3>
                                <p data-translate="avg_fee_per_transaction">Avg Fee per Transaction</p>
                                <span class="stat-change positive">+2.1%</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-file-invoice"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="pending-invoices">0</h3>
                                <p data-translate="pending_invoices">Pending Invoices</p>
                                <span class="stat-change neutral">€0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Revenue Charts -->
                    <div class="charts-section">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 data-translate="revenue_breakdown">Revenue Breakdown</h3>
                                <div class="chart-controls">
                                    <select id="revenue-period">
                                        <option value="7d" data-translate="last_7_days">Last 7 days</option>
                                        <option value="30d" data-translate="last_30_days">Last 30 days</option>
                                        <option value="90d" data-translate="last_90_days">Last 90 days</option>
                                    </select>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="revenueBreakdownChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 data-translate="fee_distribution">Fee Distribution</h3>
                            </div>
                            <div class="chart-container">
                                <canvas id="feeDistributionChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Invoices -->
                    <div class="recent-invoices">
                        <div class="section-header">
                            <h3 data-translate="recent_invoices">Recent Invoices</h3>
                            <button class="btn btn-primary" onclick="showPage('invoices')" data-translate="view_all_invoices">View All Invoices</button>
                        </div>
                        <div class="table-container">
                            <table class="invoices-table">
                                <thead>
                                    <tr>
                                        <th data-translate="invoice_number">Invoice Number</th>
                                        <th data-translate="merchant">Merchant</th>
                                        <th data-translate="amount">Amount</th>
                                        <th data-translate="status">Status</th>
                                        <th data-translate="due_date">Due Date</th>
                                        <th data-translate="actions">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="recent-invoices-body">
                                    <!-- Invoices will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Fee Calculator Page -->
            <div id="fee-calculator-page" class="page">
                <div class="fee-calculator-dashboard">
                    <h2 data-translate="fee_calculator">Fee Calculator</h2>
                    
                    <div class="calculator-section">
                        <div class="calculator-card">
                            <h3 data-translate="calculate_transaction_fee">Calculate Transaction Fee</h3>
                            <div class="calculator-form">
                                <div class="form-group">
                                    <label data-translate="transaction_amount">Transaction Amount (€)</label>
                                    <input type="number" id="calc-amount" placeholder="100.00" step="0.01" min="0">
                                </div>
                                
                                <div class="form-group">
                                    <label data-translate="card_type">Card Type</label>
                                    <select id="calc-card-type">
                                        <option value="true" data-translate="european_card">European Card</option>
                                        <option value="false" data-translate="non_european_card">Non-European Card</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label data-translate="merchant_optional">Merchant (Optional)</label>
                                    <select id="calc-merchant">
                                        <option value="" data-translate="default_rates">Default Rates</option>
                                    </select>
                                </div>
                                
                                <button class="btn btn-primary" onclick="calculateFee()" data-translate="calculate">Calculate</button>
                            </div>
                            
                            <div class="calculation-result" id="calculation-result" style="display: none;">
                                <h4 data-translate="calculation_result">Calculation Result</h4>
                                <div class="result-item">
                                    <span data-translate="transaction_amount">Transaction Amount:</span>
                                    <span id="result-amount">€0.00</span>
                                </div>
                                <div class="result-item">
                                    <span data-translate="processing_fee">Processing Fee:</span>
                                    <span id="result-fee">€0.00</span>
                                </div>
                                <div class="result-item total">
                                    <span data-translate="merchant_receives">Merchant Receives:</span>
                                    <span id="result-net">€0.00</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="rates-card">
                            <h3 data-translate="current_rates">Current Rates</h3>
                            <div class="rates-table">
                                <div class="rate-item">
                                    <div class="rate-label" data-translate="european_cards">European Cards</div>
                                    <div class="rate-value">0.5% + €0.10</div>
                                </div>
                                <div class="rate-item">
                                    <div class="rate-label" data-translate="non_european_cards">Non-European Cards</div>
                                    <div class="rate-value">2.4% + €0.20</div>
                                </div>
                                <div class="rate-item">
                                    <div class="rate-label" data-translate="chargeback_fee">Chargeback Fee</div>
                                    <div class="rate-value">€9.00</div>
                                </div>
                                <div class="rate-item">
                                    <div class="rate-label" data-translate="refund_fee">Refund Fee</div>
                                    <div class="rate-value">€0.05</div>
                                </div>
                            </div>
                            
                            <div class="competitive-note">
                                <h4 data-translate="competitive_advantage">Competitive Advantage</h4>
                                <ul>
                                    <li data-translate="no_monthly_fees">No monthly fees</li>
                                    <li data-translate="no_setup_fees">No setup fees</li>
                                    <li data-translate="no_hidden_charges">No hidden charges</li>
                                    <li data-translate="transparent_pricing">Transparent pricing</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="modal-overlay" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-title">Modal Title</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Modal content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Billing Configuration Modal -->
    <div id="billing-config-modal" class="modal-overlay" style="display: none;">
        <div class="modal large">
            <div class="modal-header">
                <h3 data-translate="billing_configuration">Billing Configuration</h3>
                <button class="modal-close" onclick="closeBillingConfigModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="billing-config-form">
                    <div class="form-section">
                        <h4 data-translate="default_fee_structure">Default Fee Structure</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label data-translate="european_card_percentage">European Card Percentage (%)</label>
                                <input type="number" id="config-eu-percentage" step="0.01" min="0" max="100">
                            </div>
                            <div class="form-group">
                                <label data-translate="european_card_fixed_fee">European Card Fixed Fee (€)</label>
                                <input type="number" id="config-eu-fixed" step="0.01" min="0">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label data-translate="non_european_card_percentage">Non-European Card Percentage (%)</label>
                                <input type="number" id="config-non-eu-percentage" step="0.01" min="0" max="100">
                            </div>
                            <div class="form-group">
                                <label data-translate="non_european_card_fixed_fee">Non-European Card Fixed Fee (€)</label>
                                <input type="number" id="config-non-eu-fixed" step="0.01" min="0">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label data-translate="chargeback_fee">Chargeback Fee (€)</label>
                                <input type="number" id="config-chargeback-fee" step="0.01" min="0">
                            </div>
                            <div class="form-group">
                                <label data-translate="refund_fee">Refund Fee (€)</label>
                                <input type="number" id="config-refund-fee" step="0.01" min="0">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h4 data-translate="billing_settings">Billing Settings</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label data-translate="default_billing_cycle">Default Billing Cycle</label>
                                <select id="config-billing-cycle">
                                    <option value="monthly" data-translate="monthly">Monthly</option>
                                    <option value="weekly" data-translate="weekly">Weekly</option>
                                    <option value="daily" data-translate="daily">Daily</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label data-translate="auto_billing">Auto Billing</label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="config-auto-billing" checked>
                                    <span data-translate="enable_automatic_billing">Enable automatic billing</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeBillingConfigModal()" data-translate="cancel">Cancel</button>
                        <button type="submit" class="btn btn-primary" data-translate="save_configuration">Save Configuration</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>

